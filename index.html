<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vapor UI with Vite</title>

        <!-- ğŸ’¡ @vapor-ui/core FOUC ë°©ì§€ ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ -->
        <script>
            (function () {
                // ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” React ì‹¤í–‰ ì „ì— ë™ì‘í•˜ì—¬ FOUCë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
                // ì•„ë˜ ì„¤ì •ì„ ìì‹ ì˜ í”„ë¡œì íŠ¸ì— ë§ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.
                const defaultConfig = {
                    appearance: 'light',
                    radius: 'md',
                    scaling: 1.0,
                };
                const storageKey = 'my-vite-app-theme'; // ThemeProviderì™€ ë™ì¼í•œ storageKeyë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

                // --- ë‚´ë¶€ ë¡œì§ (ìˆ˜ì • ë¶ˆí•„ìš”) ---
                const root = document.documentElement;
                let currentThemes = defaultConfig;

                try {
                    const storedItem = localStorage.getItem(storageKey);
                    if (storedItem) {
                        const storedSettings = JSON.parse(storedItem);
                        currentThemes = Object.assign({}, defaultConfig, storedSettings);
                    }
                } catch (e) {
                    // localStorageê°€ ë¹„í™œì„±í™”ëœ ê²½ìš° ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                }

                // 1. Color Theme ì ìš©
                if (currentThemes.appearance === 'dark') {
                    root.classList.add('vapor-dark-theme');
                } else {
                    root.classList.add('vapor-light-theme');
                }

                // 2. Radius Theme ì ìš©
                const radiusMap = { none: 0, sm: 0.5, md: 1, lg: 1.5, xl: 2, full: 3 };
                const radiusFactor = radiusMap[currentThemes.radius] ?? 1;
                root.style.setProperty('--vapor-radius-factor', radiusFactor.toString());

                // 3. Scaling Theme ì ìš©
                const scaleFactor = currentThemes.scaling ?? 1;
                root.style.setProperty('--vapor-scale-factor', scaleFactor.toString());
            })();
        </script>
    </head>
    <body>
        <div id="root"></div>
        <script type="module" src="/src/main.tsx"></script>
    </body>
</html>